<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù…ØªØ¬Ø± Ø£Ø¯Ùˆ | Ø¨Ø§Ù‚Ø§Øª ÙˆØ±Ø¯</title>
<style>
  :root{
    --pink:#f8cfe1;
    --pink-100:#ffe9f3;
    --pink-200:#ffd1e5;
    --pink-300:#ffb9d6;
    --pink-600:#d85697;
    --rose:#ff6f91;
    --text:#3c3c3c;
    --muted:#6b6b6b;
    --white:#fff;
    --bg:#fff7fb;
    --paper-brown:#c49a6c;
    --paper-white:#f3f3f3;
    --paper-pink:#f7c6dc;
    --paper-clear:#e8f0ff;
    --gold:#d4af37;
    --silver:#c0c0c8;
    --green:#2f7d32;
    --shadow: 0 8px 24px rgba(0,0,0,.08);
    --radius:16px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Tajawal", system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Naskh Arabic", sans-serif;
    color:var(--text);
    background:
      radial-gradient(1200px 1200px at 90% -20%, #ffd9ee 0, transparent 60%),
      radial-gradient(900px 900px at -10% 120%, #ffe5f3 0, transparent 55%),
      var(--bg);
  }
  header{
    position:sticky; top:0; z-index:20;
    backdrop-filter:saturate(140%) blur(8px);
    background:rgba(255,249,253,.7);
    border-bottom:1px solid #f5ddea;
  }
  .nav{
    display:flex; align-items:center; gap:16px; padding:12px 20px; max-width:1200px; margin:auto;
  }
  .logo{
    display:flex; align-items:center; gap:10px; font-weight:800; color:#b83b79; letter-spacing:.4px;
  }
  .logo .emoji{
    width:36px; height:36px; display:grid; place-items:center; border-radius:50%;
    background:conic-gradient(from 0deg, #ff9fc4, #ffd1e4, #ff9fc4);
    box-shadow: var(--shadow);
  }
  .nav a{color:var(--text); text-decoration:none; padding:8px 12px; border-radius:12px}
  .nav a.active, .nav a:hover{background:var(--pink-100); color:#a33770}
  .cta{margin-inline-start:auto}
  .btn{
    appearance:none; border:0; cursor:pointer;
    padding:10px 16px; border-radius:12px; background:#b83b79; color:#fff; font-weight:700;
    box-shadow: var(--shadow);
  }
  main{max-width:1200px; margin:24px auto; padding:0 16px}

  /* Hero */
  .hero{
    display:grid; grid-template-columns:1.2fr .8fr; gap:20px; align-items:center;
    padding:20px; border-radius:var(--radius);
    background:linear-gradient(180deg,#fff,#fff0), var(--pink-100);
    box-shadow: var(--shadow);
  }
  .hero h1{margin:.2em 0; color:#a33770; font-size:clamp(26px,3vw,36px)}
  .hero p{color:var(--muted)}
  .hero .stamp{
    display:inline-flex; align-items:center; gap:8px; background:#fff; padding:6px 12px; border-radius:999px; border:1px dashed #e8a8c7;
  }
  /* Cute doodles */
  .doodles{
    position:absolute; inset:0; pointer-events:none; opacity:.18;
    background:
      radial-gradient(12px 12px at 12% 30%, #ff8db3 20%, transparent 21%) no-repeat,
      radial-gradient(12px 12px at 80% 20%, #ff8db3 20%, transparent 21%) no-repeat,
      radial-gradient(10px 10px at 90% 80%, #ffa3c6 20%, transparent 21%) no-repeat,
      radial-gradient(8px 8px at 5% 85%, #ffb6d5 20%, transparent 21%) no-repeat;
  }

  /* Cards grid */
  .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(230px,1fr)); gap:16px; margin-top:20px}
  .card{
    background:#fff; border-radius:18px; overflow:hidden; box-shadow: var(--shadow); position:relative;
    border:1px solid #ffe1f0;
  }
  .card .img{aspect-ratio:1/1; display:grid; place-items:center; background:linear-gradient(180deg,#fff,#ffeaf3)}
  .card .body{padding:12px 14px}
  .price{color:#a33770; font-weight:800}
  .chip{font-size:12px; background:#fff2f8; color:#b83b79; padding:4px 8px; border-radius:10px; border:1px solid #ffd3e8}

  /* Bouquet renderer (SVG) */
  .bouquet{
    width:100%; height:100%;
  }
  /* Customizer */
  .section{
    margin-top:28px; padding:18px; background:#fff; border-radius:18px; box-shadow: var(--shadow); border:1px solid #ffe1f0; position:relative;
  }
  .section h2{margin:0 0 10px; color:#a33770}
  .row{display:grid; grid-template-columns:1fr 1fr; gap:16px}
  .field{display:flex; flex-direction:column; gap:8px}
  label{font-weight:700}
  select, input[type="number"]{
    padding:10px 12px; border-radius:12px; border:1px solid #f0cfe0; background:#fff; outline:none;
  }
  .swatches{display:flex; flex-wrap:wrap; gap:8px}
  .swatch{
    width:32px; height:32px; border-radius:999px; border:2px solid #fff; outline:2px solid rgba(0,0,0,.06); cursor:pointer;
    position:relative;
  }
  .swatch[data-active="true"]::after{
    content:"âœ“"; position:absolute; inset:0; display:grid; place-items:center; color:#fff; font-weight:900; text-shadow:0 1px 2px rgba(0,0,0,.25);
  }
  .preview{
    display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-top:16px;
  }
  .panel{background:#fff; border:1px solid #ffe1f0; border-radius:18px; padding:12px; box-shadow: var(--shadow)}
  .totals{display:flex; align-items:center; justify-content:space-between; padding:12px; background:#fff7fb; border:1px dashed #f1b4d0; border-radius:12px}
  .mini{font-size:12px; color:var(--muted)}
  .actions{display:flex; gap:10px; flex-wrap:wrap}

  /* Cart & checkout (drawer) */
  .drawer{
    position:fixed; inset-block:0; inset-inline-end:-420px; width:min(420px, 100%); background:#fff; box-shadow:-12px 0 32px rgba(0,0,0,.15);
    transition:transform .35s ease, inset-inline-end .35s ease; padding:18px; z-index:50; border-inline-start:1px solid #ffe1f0;
  }
  .drawer.open{inset-inline-end:0}
  .drawer h3{margin-top:0; color:#a33770}
  .line{display:flex; align-items:center; justify-content:space-between; padding:8px 0; border-bottom:1px dashed #f3cfe1}
  .pay-logos{display:flex; align-items:center; gap:8px; flex-wrap:wrap}
  .badge{padding:6px 10px; border-radius:10px; background:#f5f5f7; border:1px solid #ececec; font-size:12px}

  /* Support button */
  .support{
    position:fixed; inset-inline-start:16px; inset-block-end:16px; z-index:40;
  }
  .fab{
    width:54px; height:54px; border-radius:999px; background:#b83b79; color:#fff; display:grid; place-items:center; box-shadow: var(--shadow); cursor:pointer;
  }
  .chat{
    position:fixed; inset-inline-start:16px; inset-block-end:84px; width:320px; background:#fff; border:1px solid #ffd3e8; border-radius:16px; box-shadow: var(--shadow); display:none;
  }
  .chat.open{display:block}
  .chat header{position:relative; border:0; background:var(--pink-200); border-bottom:1px solid #f2bfd8; border-radius:16px 16px 0 0}
  .chat header .title{padding:10px 12px; font-weight:800; color:#7a2757}
  .chat .messages{max-height:220px; overflow:auto; padding:10px}
  .msg{background:#fff2f8; padding:8px 10px; border-radius:10px; margin:6px 0; font-size:14px}
  .chat form{display:flex; gap:6px; padding:10px}
  .chat input{flex:1; padding:10px; border:1px solid #ffd3e8; border-radius:10px}
  .chat button{padding:10px 12px; border:0; border-radius:10px; background:#b83b79; color:#fff}

  footer{margin:40px auto 80px; max-width:1200px; padding:0 16px; color:var(--muted)}
  .foot{
    display:grid; grid-template-columns:1fr 1fr; gap:16px; background:#fff; border:1px solid #ffe1f0; border-radius:16px; padding:16px; box-shadow:var(--shadow)
  }

  @media (max-width:900px){
    .hero{grid-template-columns:1fr}
    .row{grid-template-columns:1fr}
    .preview{grid-template-columns:1fr}
  }
</style>
</head>
<body>

<header>
  <nav class="nav">
    <div class="logo"><span class="emoji">ğŸŒ·</span> Ù…ØªØ¬Ø± Ø£Ø¯Ùˆ</div>
    <a href="#ready" class="active">Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</a>
    <a href="#custom">Ù…Ø®ØµØµ</a>
    <a href="#support">Ø§Ù„Ø¯Ø¹Ù…</a>
    <a href="#pay">Ø§Ù„Ø¯ÙØ¹</a>
    <div class="cta"><button class="btn" id="openCart">Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª ğŸ§º</button></div>
  </nav>
</header>

<main>
  <section class="hero">
    <div style="position:relative">
      <div class="doodles"></div>
      <span class="stamp">2000 Ø¯ÙŠÙ†Ø§Ø± Ù„Ù„ÙˆØ±Ø¯Ø©</span>
      <h1>Ø¨Ø§Ù‚Ø§Øª ÙˆØ±Ø¯ ÙƒÙŠÙˆØªâ€¦ ÙˆØªØºÙ„ÙŠÙØ§Øª Ù…ØªÙ†ÙˆØ¹Ø© ÙˆÙˆØ§Ù‚Ø¹ÙŠØ©</h1>
      <p>Ø§Ø®ØªØ± Ù…Ù† ØªØ´ÙƒÙŠÙ„ØªÙ†Ø§ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© Ø£Ùˆ ØµÙ…Ù‘Ù… Ø¨Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©: Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ±Ø¯ØŒ Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙˆØ±Ø¯ØŒ ÙˆØ£Ù„ÙˆØ§Ù† Ø§Ù„ØªØºÙ„ÙŠÙ Ù…Ø¹ Ù…Ø¹Ø§ÙŠÙ†Ø© ÙÙˆØ±ÙŠØ©.</p>
      <div class="actions">
        <a href="#ready" class="btn" style="background:#a33770">ØªØ³ÙˆÙ‚ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</a>
        <a href="#custom" class="btn" style="background:#ff77a6">ØµÙ…Ù‘Ù… Ø¨Ø§Ù‚ØªÙƒ</a>
      </div>
    </div>
    <!-- Ù…Ø¹Ø§ÙŠÙ†Ø© ÙƒØ¨ÙŠØ±Ø© ÙƒØ±ØªÙˆÙ†ÙŠØ© Ù„Ø·ÙŠÙØ© -->
    <div class="panel">
      <svg viewBox="0 0 200 200" class="bouquet" aria-label="Ø¨ÙˆÙƒÙŠÙ‡">
        <!-- Ø³ÙŠÙ‚Ø§Ù† -->
        <g opacity=".8">
          <rect x="96" y="80" width="4" height="90" fill="#2e7d32"/>
          <rect x="90" y="85" width="3" height="85" fill="#3d8a40"/>
          <rect x="107" y="88" width="3" height="82" fill="#3d8a40"/>
        </g>
        <!-- Ù„ÙÙ‘Ø© ØªØºÙ„ÙŠÙ ÙˆØ±Ø¯ÙŠØ© -->
        <path d="M60,120 Q100,90 140,120 L120,170 Q100,180 80,170 Z" fill="#f7c6dc" stroke="#e8a8c7"/>
        <!-- Ø´Ø±ÙŠØ· -->
        <circle cx="100" cy="155" r="10" fill="#d4af37"/>
        <rect x="92" y="148" width="16" height="4" rx="2" fill="#d4af37"/>
        <!-- ÙˆØ±ÙˆØ¯ -->
        <g id="hero-roses"></g>
        <script>
          // Ø±Ø³Ù… ÙˆØ±ÙˆØ¯ Ù„Ø·ÙŠÙØ©
          const container=document.currentScript.previousElementSibling;
          for(let i=0;i<11;i++){
            const cx=70+Math.cos(i/11*6.28)*28 + (i%3?15:0);
            const cy=95+Math.sin(i/11*6.28)*18 + (i%2?6:0);
            const color=['#ff769f','#ffc6dc','#ffe6ef','#ff96b6'][i%4];
            const g=document.createElementNS('http://www.w3.org/2000/svg','g');
            const c=document.createElementNS('http://www.w3.org/2000/svg','circle');
            c.setAttribute('cx',cx); c.setAttribute('cy',cy); c.setAttribute('r',12);
            c.setAttribute('fill',color);
            const swirl=document.createElementNS('http://www.w3.org/2000/svg','path');
            swirl.setAttribute('d',`M ${cx-6} ${cy} q 6 -8 12 0 q -6 8 -12 0`);
            swirl.setAttribute('stroke','#b83b79'); swirl.setAttribute('fill','none'); swirl.setAttribute('opacity','.35');
            g.append(c,swirl); container.appendChild(g);
          }
        </script>
      </svg>
    </div>
  </section>

  <!-- Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© -->
  <section id="ready" class="section">
    <h2>Ø¨Ø§Ù‚Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ù…ØªÙ†ÙˆØ¹Ø©</h2>
    <div class="grid" id="readyGrid"></div>
  </section>

  <!-- ØµÙØ­Ø© Ø§Ù„ØªØ®ØµÙŠØµ -->
  <section id="custom" class="section">
    <h2>Ø®ØµÙ‘Øµ Ø¨Ø§Ù‚ØªÙƒ</h2>
    <div class="row">
      <div class="field">
        <label>Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ±ÙˆØ¯</label>
        <input type="number" id="qty" min="5" max="100" step="1" value="12" />
        <span class="mini">Ø§Ù„Ø³Ø¹Ø± ÙŠÙØ­ØªØ³Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (2000 Ø¯ÙŠÙ†Ø§Ø± Ù„Ù„ÙˆØ±Ø¯Ø©).</span>
      </div>
      <div class="field">
        <label>Ù„ÙˆÙ† Ø§Ù„Ø´Ø±ÙŠØ·</label>
        <select id="ribbon">
          <option value="gold">Ø°Ù‡Ø¨ÙŠ</option>
          <option value="silver">ÙØ¶ÙŠ</option>
          <option value="pink">ÙˆØ±Ø¯ÙŠ</option>
          <option value="white">Ø£Ø¨ÙŠØ¶</option>
        </select>
      </div>
      <div class="field">
        <label>Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙˆØ±Ø¯ (Ø§Ø®ØªØ± Ø­ØªÙ‰ 3)</label>
        <div class="swatches" id="roseSwatches"></div>
      </div>
      <div class="field">
        <label>Ù„ÙˆÙ† Ø§Ù„ØªØºÙ„ÙŠÙ</label>
        <select id="wrap">
          <option value="paper-pink">ÙˆØ±Ø¯ÙŠ</option>
          <option value="paper-brown">Ø¨Ù†ÙŠ</option>
          <option value="paper-white">Ø£Ø¨ÙŠØ¶</option>
          <option value="paper-clear">Ø´ÙØ§Ù</option>
        </select>
      </div>
    </div>

    <div class="preview">
      <div class="panel">
        <strong>Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø§Ù‚Ø©</strong>
        <div style="aspect-ratio:1/1; margin-top:8px; display:grid; place-items:center;">
          <svg viewBox="0 0 200 220" class="bouquet" id="previewSVG" aria-label="Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ø®ØµØµØ©">
            <!-- stems -->
            <g id="stems"></g>
            <!-- wrap -->
            <path id="wrapPath" d="M50,140 Q100,100 150,140 L125,200 Q100,210 75,200 Z" fill="#f7c6dc" stroke="#e8a8c7"/>
            <!-- ribbon -->
            <g id="ribbonG">
              <circle cx="100" cy="182" r="10" fill="#d4af37"/>
              <rect x="92" y="175" width="16" height="4" rx="2" fill="#d4af37"/>
            </g>
            <!-- roses -->
            <g id="roses"></g>
          </svg>
        </div>
      </div>
      <div class="panel">
        <strong>Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</strong>
        <div class="totals" style="margin-top:10px">
          <div>
            <div>Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ±ÙˆØ¯: <b id="summaryQty">12</b></div>
            <div class="mini">Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙˆØ±Ø¯: <span id="summaryColors"></span></div>
            <div class="mini">Ù„ÙˆÙ† Ø§Ù„ØªØºÙ„ÙŠÙ: <span id="summaryWrap">ÙˆØ±Ø¯ÙŠ</span> â€” Ø§Ù„Ø´Ø±ÙŠØ·: <span id="summaryRibbon">Ø°Ù‡Ø¨ÙŠ</span></div>
          </div>
          <div>
            <div class="price" id="totalPrice">24,000 Ø¯.Ø¹</div>
            <div class="mini">2000 Ø¯.Ø¹ Ã— <span id="miniQty">12</span></div>
          </div>
        </div>
        <div class="actions" style="margin-top:10px">
          <button class="btn" id="addToCart">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
          <button class="btn" style="background:#ff77a6" id="buyNow">Ø§Ø´ØªØ±ÙŠ Ø§Ù„Ø¢Ù†</button>
        </div>
        <p class="mini" style="margin-top:8px"><span class="chip">Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¢Ù…Ù†</span> ÙÙŠØ²Ø§ / Ù…Ø§Ø³ØªØ±ÙƒØ§Ø±Ø¯ / Ø¨Ø§ÙŠ Ø¨Ø§Ù„ / ØªØ­ÙˆÙŠÙ„ Ù…Ø­Ù„ÙŠ</p>
      </div>
    </div>
  </section>
</main>

<!-- Ø³Ù„Ø© + Ø§Ù„Ø¯ÙØ¹ -->
<aside class="drawer" id="cartDrawer" aria-label="Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„Ø¯ÙØ¹">
  <h3>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
  <div id="cartLines"></div>
  <div class="line"><strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</strong><strong id="cartTotal">0 Ø¯.Ø¹</strong></div>

  <h4 id="pay">Ø§Ù„Ø¯ÙØ¹</h4>
  <div class="pay-logos">
    <span class="badge">ğŸ’³ VISA</span>
    <span class="badge">ğŸ’³ MasterCard</span>
    <span class="badge">ğŸ…¿ï¸ PayPal</span>
    <span class="badge">ğŸ¦ ØªØ­ÙˆÙŠÙ„ Ù…Ø­Ù„ÙŠ</span>
  </div>

  <form id="checkout" style="margin-top:12px">
    <div class="field"><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label><input required placeholder="Ø§Ø³Ù…Ùƒ" /></div>
    <div class="field"><label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label><input required type="tel" placeholder="07xxxxxxxx" /></div>
    <div class="field"><label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label><input required placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø§Ù„Ø´Ø§Ø±Ø¹â€¦" /></div>
    <button class="btn" type="submit" style="width:100%; margin-top:10px">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
  </form>
  <p class="mini">Ù‡Ø°Ø§ Ù†Ù…ÙˆØ°Ø¬ ØªØ¬Ø±ÙŠØ¨ÙŠ. Ø¹Ù†Ø¯ Ø§Ù„Ø±Ø¨Ø· Ø¨Ø¨ÙˆØ§Ø¨Ø© Ø¯ÙØ¹ Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ù„ØµÙØ­Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù…Ù†Ø©.</p>
</aside>

<!-- Ø¯Ø¹Ù… -->
<div class="support" id="support">
  <div class="fab" id="toggleChat">ğŸ’¬</div>
  <div class="chat" id="chatBox" aria-live="polite">
    <header><div class="title">Ø¯Ø¹Ù… Ù…ØªØ¬Ø± Ø£Ø¯Ùˆ</div></header>
    <div class="messages" id="messages">
      <div class="msg">Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ Ù†Ù‚Ø¯Ø± Ù†Ø³Ø§Ø¹Ø¯ÙƒØŸ ğŸŒ·</div>
    </div>
    <form id="chatForm">
      <input id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒâ€¦" />
      <button>Ø¥Ø±Ø³Ø§Ù„</button>
    </form>
  </div>
</div>

<footer>
  <div class="foot">
    <div>Â© Ù…ØªØ¬Ø± Ø£Ø¯Ùˆ â€” ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</div>
    <div style="text-align:end">Ø³Ø¹Ø± Ø§Ù„ÙˆØ±Ø¯Ø©: 2000 Ø¯ÙŠÙ†Ø§Ø± â€” ØªØºÙ„ÙŠÙØ§Øª ÙˆØ£Ù„ÙˆØ§Ù† Ù…ØªØ¹Ø¯Ø¯Ø©.</div>
  </div>
</footer>

<script>
  //â€” Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©
  const PRICE_PER_ROSE = 2000;

  //â€” ØªÙˆÙ„ÙŠØ¯ Ø¨Ø§Ù‚Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ø¨Ø±Ø³ÙˆÙ… SVG Ù…Ø®ØªÙ„ÙØ© Ø§Ù„ØªØºÙ„ÙŠÙ/Ø§Ù„Ø£Ø´Ø±Ø·Ø©
  const readyData = [
    { title:'Ø¨Ø§Ù‚Ø© ÙˆØ±Ø¯ÙŠØ© Ø¨Ø´Ø±ÙŠØ· Ø³Ù…Ø§ÙˆÙŠ', colors:['#ffa3c6'], wrap:'paper-pink', ribbon:'pink' },
    { title:'Ø¨Ø§Ù‚Ø© Ø­Ù…Ø±Ø§Ø¡ Ø¨ØªØºÙ„ÙŠÙ Ø¨Ù†ÙŠ', colors:['#ff4b6e'], wrap:'paper-brown', ribbon:'gold' },
    { title:'Ø¨Ø§Ù‚Ø© Ø¨ÙŠØ¶Ø§Ø¡ Ø¨ØªØºÙ„ÙŠÙ Ø´ÙØ§Ù', colors:['#fff5f7'], wrap:'paper-clear', ribbon:'silver' },
    { title:'Ø¨Ø§Ù‚Ø© Ù…Ø®ØªÙ„Ø·Ø© (ÙˆØ±Ø¯ÙŠ/Ø£Ø¨ÙŠØ¶)', colors:['#ffa3c6','#fff5f7'], wrap:'paper-white', ribbon:'gold' },
    { title:'Ø¨Ø§Ù‚Ø© Ù…Ø´ÙƒÙ‘Ù„Ø© (ÙˆØ±Ø¯ÙŠ/Ø£Ø­Ù…Ø±/Ø£Ø¨ÙŠØ¶)', colors:['#ff6f91','#ffa3c6','#fff5f7'], wrap:'paper-pink', ribbon:'gold' },
    { title:'Ø¨Ø§Ù‚Ø© Ø¨Ù†ÙØ³Ø¬ÙŠØ©', colors:['#c083d3'], wrap:'paper-white', ribbon:'silver' },
  ];

  function wrapColor(key){
    return {
      'paper-pink':'#f7c6dc',
      'paper-brown':'#c49a6c',
      'paper-white':'#f3f3f3',
      'paper-clear':'#e8f0ff'
    }[key] || '#f7c6dc';
  }
  function ribbonFill(key){
    return { gold:'#d4af37', silver:'#c0c0c8', pink:'#ff77a6', white:'#ffffff' }[key] || '#d4af37';
  }

  function makeBouquetSVG({colors, wrap='paper-pink', ribbon='gold'}, qty=15){
    // SVG Ø¨Ø·Ø§Ù‚Ø©
    const svg = document.createElementNS('http://www.w3.org/2000/svg','svg');
    svg.setAttribute('viewBox','0 0 200 220'); svg.classList.add('bouquet');
    // stems
    const stems = document.createElementNS(svg.namespaceURI,'g');
    for(let i=0;i<Math.min(qty,18);i++){
      const x = 70 + (i%6)*6 + Math.random()*6;
      const r = document.createElementNS(svg.namespaceURI,'rect');
      r.setAttribute('x', x); r.setAttribute('y', 110+Math.random()*10);
      r.setAttribute('width', 2); r.setAttribute('height', 80+Math.random()*10);
      r.setAttribute('fill', ['#2e7d32','#3d8a40'][i%2]);
      stems.appendChild(r);
    }
    svg.appendChild(stems);
    // wrap
    const path = document.createElementNS(svg.namespaceURI,'path');
    path.setAttribute('d','M50,140 Q100,100 150,140 L125,200 Q100,210 75,200 Z');
    path.setAttribute('fill', wrapColor(wrap));
    path.setAttribute('stroke', '#e8a8c7');
    svg.appendChild(path);
    // ribbon
    const rg = document.createElementNS(svg.namespaceURI,'g');
    const circ = document.createElementNS(svg.namespaceURI,'circle');
    circ.setAttribute('cx','100'); circ.setAttribute('cy','182'); circ.setAttribute('r','10');
    circ.setAttribute('fill', ribbonFill(ribbon));
    const bar = document.createElementNS(svg.namespaceURI,'rect');
    bar.setAttribute('x','92'); bar.setAttribute('y','175'); bar.setAttribute('width','16'); bar.setAttribute('height','4'); bar.setAttribute('rx','2');
    bar.setAttribute('fill', ribbonFill(ribbon));
    rg.append(circ,bar); svg.appendChild(rg);
    // roses
    const roses = document.createElementNS(svg.namespaceURI,'g');
    for(let i=0;i<qty;i++){
      const angle = (i/qty)*Math.PI*2;
      const cx = 100 + Math.cos(angle)*(28 + (i%3)*5) + (Math.random()*6-3);
      const cy = 120 + Math.sin(angle)*(18 + (i%2)*5) + (Math.random()*6-3);
      const c = document.createElementNS(svg.namespaceURI,'circle');
      c.setAttribute('cx',cx); c.setAttribute('cy',cy); c.setAttribute('r',12);
      c.setAttribute('fill', colors[i%colors.length]);
      const swirl=document.createElementNS(svg.namespaceURI,'path');
      swirl.setAttribute('d',`M ${cx-6} ${cy} q 6 -8 12 0 q -6 8 -12 0`);
      swirl.setAttribute('stroke','#9a2d62'); swirl.setAttribute('opacity','.3'); swirl.setAttribute('fill','none');
      roses.append(c,swirl);
    }
    svg.appendChild(roses);
    return svg;
  }

  // Ø¨Ù†Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©
  const grid = document.getElementById('readyGrid');
  readyData.forEach((cfg,i)=>{
    const card = document.createElement('div'); card.className='card';
    const img = document.createElement('div'); img.className='img';
    img.appendChild( makeBouquetSVG(cfg, 14 + (i%5)) );
    const body = document.createElement('div'); body.className='body';
    body.innerHTML = `<div style="display:flex;align-items:center;justify-content:space-between;gap:8px">
      <div><strong>${cfg.title}</strong><div class="mini">Ø§Ø®ØªÙ„Ø§Ù Ø¨Ø§Ù„ØªØºÙ„ÙŠÙ ÙˆØ§Ù„Ø´Ø±ÙŠØ·</div></div>
      <div class="price">2000 Ø¯.Ø¹/ÙˆØ±Ø¯Ø©</div>
    </div>
    <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
      <span class="chip">ØªØºÙ„ÙŠÙ: ${document.querySelector('#wrap option[value="'+cfg.wrap+'"]').textContent}</span>
      <span class="chip">Ø´Ø±ÙŠØ·: ${cfg.ribbon==='gold'?'Ø°Ù‡Ø¨ÙŠ':(cfg.ribbon==='silver'?'ÙØ¶ÙŠ':(cfg.ribbon==='pink'?'ÙˆØ±Ø¯ÙŠ':'Ø£Ø¨ÙŠØ¶'))}</span>
    </div>
    <div style="margin-top:10px;display:flex;gap:8px">
      <button class="btn" data-buy-ready="${i}" style="background:#ff77a6">Ø§Ø´ØªØ±ÙŠ Ø§Ù„Ø¢Ù†</button>
      <button class="btn" data-add-ready="${i}">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
    </div>`;
    card.append(img,body); grid.appendChild(card);
  });

  //â€” Ø§Ù„ØªØ®ØµÙŠØµ
  const qtyEl = document.getElementById('qty');
  const wrapEl = document.getElementById('wrap');
  const ribbonEl = document.getElementById('ribbon');
  const rosesG = document.getElementById('roses');
  const stemsG = document.getElementById('stems');
  const wrapPath = document.getElementById('wrapPath');
  const ribbonG = document.getElementById('ribbonG');

  // Ø£Ù„ÙˆØ§Ù† ÙˆØ±Ø¯ Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±
  const ROSE_COLORS = [
    {name:'Ø£Ø­Ù…Ø±', hex:'#ff4b6e'},
    {name:'ÙˆØ±Ø¯ÙŠ', hex:'#ffa3c6'},
    {name:'ÙˆØ±Ø¯ÙŠ ÙØ§ØªØ­', hex:'#ffd1e4'},
    {name:'Ø£Ø¨ÙŠØ¶', hex:'#fff5f7'},
    {name:'Ø£ØµÙØ±', hex:'#ffd54f'},
    {name:'Ø¨Ù†ÙØ³Ø¬ÙŠ', hex:'#c083d3'},
    {name:'Ø£Ø²Ø±Ù‚ ÙØ§ØªØ­', hex:'#8ec5ff'}
  ];
  const swatchesWrap = document.getElementById('roseSwatches');
  const activeColors = new Set(['#ffa3c6']); // Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ

  ROSE_COLORS.forEach(c=>{
    const b=document.createElement('button');
    b.type='button'; b.className='swatch';
    b.style.background=c.hex; b.title=c.name; b.dataset.hex=c.hex;
    b.addEventListener('click',()=>{
      if(activeColors.has(c.hex)){ activeColors.delete(c.hex); b.dataset.active="false"; }
      else{
        if(activeColors.size>=3){ alert('ÙŠÙ…ÙƒÙ† Ø§Ø®ØªÙŠØ§Ø± Ø­ØªÙ‰ 3 Ø£Ù„ÙˆØ§Ù† Ù„Ù„ÙˆØ±Ø¯.'); return; }
        activeColors.add(c.hex); b.dataset.active="true";
      }
      updatePreview();
    });
    if(activeColors.has(c.hex)) b.dataset.active="true";
    swatchesWrap.appendChild(b);
  });

  function updatePreview(){
    const qty = Math.max(5, Math.min(100, parseInt(qtyEl.value||12)));
    qtyEl.value = qty;
    // stems
    stemsG.innerHTML='';
    for(let i=0;i<Math.min(qty,22);i++){
      const x = 70 + (i%6)*6 + Math.random()*6;
      const r = document.createElementNS('http://www.w3.org/2000/svg','rect');
      r.setAttribute('x', x); r.setAttribute('y', 120+Math.random()*8);
      r.setAttribute('width', 2); r.setAttribute('height', 80+Math.random()*12);
      r.setAttribute('fill', ['#2e7d32','#3d8a40'][i%2]);
      stemsG.appendChild(r);
    }
    // wrap
    wrapPath.setAttribute('fill', wrapColor(wrapEl.value));
    // ribbon
    ribbonG.querySelectorAll('*').forEach(el=>el.setAttribute('fill', ribbonFill(ribbonEl.value)));

    // roses
    const colors = Array.from(activeColors);
    rosesG.innerHTML='';
    for(let i=0;i<qty;i++){
      const angle = (i/qty)*Math.PI*2;
      const cx = 100 + Math.cos(angle)*(28 + (i%3)*5) + (Math.random()*6-3);
      const cy = 130 + Math.sin(angle)*(18 + (i%2)*5) + (Math.random()*6-3);
      const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx',cx); c.setAttribute('cy',cy); c.setAttribute('r',12);
      c.setAttribute('fill', colors[i%colors.length]);
      const swirl=document.createElementNS('http://www.w3.org/2000/svg','path');
      swirl.setAttribute('d',`M ${cx-6} ${cy} q 6 -8 12 0 q -6 8 -12 0`);
      swirl.setAttribute('stroke','#9a2d62'); swirl.setAttribute('opacity','.3'); swirl.setAttribute('fill','none');
      rosesG.append(c,swirl);
    }

    // summary + price
    document.getElementById('summaryQty').textContent = qty;
    document.getElementById('miniQty').textContent = qty;
    document.getElementById('summaryWrap').textContent = wrapEl.selectedOptions[0].textContent;
    document.getElementById('summaryRibbon').textContent = ribbonEl.selectedOptions[0].textContent;
    document.getElementById('summaryColors').textContent = colors.length? colors.map(h=>ROSE_COLORS.find(x=>x.hex===h).name).join('ØŒ '):'â€”';
    const total = qty * PRICE_PER_ROSE;
    document.getElementById('totalPrice').textContent = total.toLocaleString('ar-IQ') + ' Ø¯.Ø¹';
  }
  qtyEl.addEventListener('input', updatePreview);
  wrapEl.addEventListener('change', updatePreview);
  ribbonEl.addEventListener('change', updatePreview);
  updatePreview();

  //â€” Ø³Ù„Ø© Ù…Ø¨Ø³Ø·Ø©
  const drawer = document.getElementById('cartDrawer');
  document.getElementById('openCart').onclick=()=>drawer.classList.add('open');

  const cart = [];
  function refreshCart(){
    const lines = document.getElementById('cartLines');
    lines.innerHTML='';
    let total=0;
    cart.forEach((item,idx)=>{
      const row=document.createElement('div'); row.className='line';
      row.innerHTML=`<div>
         <div><strong>Ø¨Ø§Ù‚Ø© Ù…Ø®ØµØµØ©</strong> â€” ${item.qty} ÙˆØ±Ø¯Ø©</div>
         <div class="mini">Ø£Ù„ÙˆØ§Ù†: ${item.colors.map(h=>ROSE_COLORS.find(x=>x.hex===h)?.name||'').join('ØŒ ')} | ØªØºÙ„ÙŠÙ: ${item.wrapTxt} | Ø´Ø±ÙŠØ·: ${item.ribbonTxt}</div>
      </div>
      <div>
        <div class="price">${(item.qty*PRICE_PER_ROSE).toLocaleString('ar-IQ')} Ø¯.Ø¹</div>
        <button style="margin-top:6px" class="btn" onclick="removeLine(${idx})">Ø­Ø°Ù</button>
      </div>`;
      lines.appendChild(row);
      total += item.qty * PRICE_PER_ROSE;
    });
    document.getElementById('cartTotal').textContent = total.toLocaleString('ar-IQ')+' Ø¯.Ø¹';
  }
  window.removeLine = i => { cart.splice(i,1); refreshCart(); }

  function currentConfig(){
    return {
      qty: parseInt(qtyEl.value||12),
      colors: Array.from(activeColors),
      wrap: wrapEl.value,
      wrapTxt: wrapEl.selectedOptions[0].textContent,
      ribbon: ribbonEl.value,
      ribbonTxt: ribbonEl.selectedOptions[0].textContent
    }
  }

  document.getElementById('addToCart').onclick=()=>{
    cart.push(currentConfig()); refreshCart(); drawer.classList.add('open');
  };
  document.getElementById('buyNow').onclick=()=>{
    cart.push(currentConfig()); refreshCart(); drawer.classList.add('open');
    document.getElementById('checkout').scrollIntoView({behavior:'smooth'});
  };

  // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©
  document.querySelectorAll('[data-add-ready]').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const cfg = readyData[parseInt(btn.dataset.addReady)];
      cart.push({qty:12, colors:cfg.colors, wrap:cfg.wrap, wrapTxt:document.querySelector('#wrap option[value="'+cfg.wrap+'"]').textContent, ribbon:cfg.ribbon, ribbonTxt:(cfg.ribbon==='gold'?'Ø°Ù‡Ø¨ÙŠ':cfg.ribbon==='silver'?'ÙØ¶ÙŠ':cfg.ribbon==='pink'?'ÙˆØ±Ø¯ÙŠ':'Ø£Ø¨ÙŠØ¶')});
      refreshCart(); drawer.classList.add('open');
    });
  });
  document.querySelectorAll('[data-buy-ready]').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const cfg = readyData[parseInt(btn.dataset.buyReady)];
      cart.push({qty:12, colors:cfg.colors, wrap:cfg.wrap, wrapTxt:document.querySelector('#wrap option[value="'+cfg.wrap+'"]').textContent, ribbon:cfg.ribbon, ribbonTxt:(cfg.ribbon==='gold'?'Ø°Ù‡Ø¨ÙŠ':cfg.ribbon==='silver'?'ÙØ¶ÙŠ':cfg.ribbon==='pink'?'ÙˆØ±Ø¯ÙŠ':'Ø£Ø¨ÙŠØ¶')});
      refreshCart(); drawer.classList.add('open');
      document.getElementById('checkout').scrollIntoView({behavior:'smooth'});
    });
  });

  // Ø¯ÙØ¹ ØªØ¬Ø±ÙŠØ¨ÙŠ
  document.getElementById('checkout').addEventListener('submit', (e)=>{
    e.preventDefault();
    alert('ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ğŸŒ· Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù„Ù„ØªØ£ÙƒÙŠØ¯ ÙˆØ§Ù„Ø¯ÙØ¹.');
    drawer.classList.remove('open'); cart.length=0; refreshCart();
  });

  // Ø¯Ø¹Ù… Ø¨Ø³ÙŠØ·
  const chatBtn=document.getElementById('toggleChat');
  const chatBox=document.getElementById('chatBox');
  chatBtn.onclick=()=>chatBox.classList.toggle('open');
  document.getElementById('chatForm').addEventListener('submit', (e)=>{
    e.preventDefault();
    const input=document.getElementById('chatInput');
    if(!input.value.trim()) return;
    const div=document.createElement('div'); div.className='msg'; div.textContent=input.value;
    document.getElementById('messages').appendChild(div); input.value='';
    setTimeout(()=>{
      const reply=document.createElement('div'); reply.className='msg';
      reply.textContent='Ø´ÙƒØ±Ù‹Ø§ Ù„ØªÙˆØ§ØµÙ„Ùƒ! Ø³Ù†Ø±Ø¯ Ø¹Ù„ÙŠÙƒ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚.';
      document.getElementById('messages').appendChild(reply);
    },600);
  });

</script>
</body>
</html>

